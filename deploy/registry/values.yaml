nameOverride: "registry"
fullnameOverride: "registry"

team: "foundation"

iamRole: arn:aws:iam::479720515435:role/ecsInstanceRole

image:
  repository: flowcommerce/registry

resources:
  limits:
    memory: "900Mi"
    cpu: 1
  requests:
    memory: "900Mi"
    cpu: .05

jvmOpts:
   memory: 500m

deployments:
  live:
    minReplicas: 2
    maxReplicas: 2
    maxUnavailable: 1

rolloutResource:
   enabled: true 

canary: 
  enabled: true # Disable this to follow the default RollingUpdate Strategy
  migration: false
  analysis:
   - name: error-rate
     successCondition: default(result, 0) < 0.05   
     provider:
      datadog:
        query: |
          sum:trace.akka_http.request.errors{service:registry}.as_count()  /
          sum:trace.akka_http.request.hits{service:registry}.as_count()
   - name: response-time
     successCondition: default(result, 0) < 0.1
     provider:
      datadog:
        query: p95:trace.akka_http.request{service:registry}

        